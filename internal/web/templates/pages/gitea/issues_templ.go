// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package gitea

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"fmt"
	"github.com/fr4nsys/usulnet/internal/web/templates/layouts"
)

// ============================================================================
// Issues Page Data
// ============================================================================

type IssueListData struct {
	PageData    layouts.PageData
	Repo        RepoDetail
	Issues      []IssueItem
	State       string // "open", "closed", "all"
	CSRFToken   string
	Labels      []LabelItem
	Milestones  []MilestoneItem
	OpenCount   int
	ClosedCount int
}

type MilestoneItem struct {
	ID    int64
	Title string
	State string
}

// ============================================================================
// Issues List Template
// ============================================================================
func IssuesList(data IssueListData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Var2 := templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
			templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
			templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
			if !templ_7745c5c3_IsBuffer {
				defer func() {
					templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err == nil {
						templ_7745c5c3_Err = templ_7745c5c3_BufErr
					}
				}()
			}
			ctx = templ.InitializeContext(ctx)
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<div class=\"space-y-6\"><!-- Breadcrumb --><div class=\"flex items-center gap-2 text-sm text-gray-400\"><a href=\"/integrations/gitea\" class=\"hover:text-white transition-colors\"><i class=\"fas fa-code-branch mr-1\"></i>Gitea</a> <i class=\"fas fa-chevron-right text-xs\"></i> <a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 templ.SafeURL
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s", data.Repo.ID)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 43, Col: 86}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "\" class=\"hover:text-white transition-colors\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var4 string
			templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(data.Repo.FullName)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 44, Col: 25}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "</a> <i class=\"fas fa-chevron-right text-xs\"></i> <span class=\"text-white\">Issues</span></div><!-- Header --><div class=\"flex items-center justify-between\"><div class=\"flex items-center gap-3\"><i class=\"fas fa-circle-exclamation text-2xl text-yellow-400\"></i><div><h1 class=\"text-2xl font-display font-bold text-white\">Issues</h1><p class=\"text-gray-400 text-sm\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var5 string
			templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(data.Repo.FullName)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 56, Col: 59}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "</p></div></div><button onclick=\"openCreateIssueModal()\" class=\"btn-primary\"><i class=\"fas fa-plus mr-2\"></i>New Issue</button></div><!-- Tab Navigation -->")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = repoTabNav(data.Repo, "issues", data.OpenCount, 0).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "<!-- Filters --><div class=\"flex items-center gap-4\"><div class=\"flex rounded-lg overflow-hidden border border-gray-700\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var6 = []any{"px-4 py-2 text-sm", issueStateTabClass(data.State, "open")}
			templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var6...)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "<a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var7 templ.SafeURL
			templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s/issues?state=open", data.Repo.ID)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 70, Col: 105}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "\" class=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var8 string
			templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var6).String())
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 1, Col: 0}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "\"><i class=\"fas fa-circle-dot mr-1\"></i>Open ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.OpenCount > 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "<span class=\"ml-1 bg-gray-600 px-1.5 py-0.5 rounded-full text-xs\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var9 string
				templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", data.OpenCount))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 74, Col: 108}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "</span>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "</a> ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var10 = []any{"px-4 py-2 text-sm border-l border-gray-700", issueStateTabClass(data.State, "closed")}
			templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var10...)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "<a href=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var11 templ.SafeURL
			templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinURLErrs(templ.SafeURL(fmt.Sprintf("/integrations/gitea/repos/%s/issues?state=closed", data.Repo.ID)))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 77, Col: 107}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "\" class=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var12 string
			templ_7745c5c3_Var12, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var10).String())
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 1, Col: 0}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var12))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "\"><i class=\"fas fa-check mr-1\"></i>Closed ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if data.ClosedCount > 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "<span class=\"ml-1 bg-gray-600 px-1.5 py-0.5 rounded-full text-xs\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var13 string
				templ_7745c5c3_Var13, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", data.ClosedCount))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 81, Col: 110}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var13))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "</span>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "</a></div></div><!-- Issues List --><div class=\"card\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			if len(data.Issues) == 0 {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "<div class=\"text-center py-12 text-gray-400\"><i class=\"fas fa-circle-check text-4xl mb-4\"></i><p class=\"text-lg\">No issues found</p><p class=\"text-sm mt-2\">Create an issue to track bugs or feature requests</p></div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			} else {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, "<div class=\"divide-y divide-gray-700/30\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				for _, issue := range data.Issues {
					templ_7745c5c3_Err = issueRow(issue, data.Repo.ID).Render(ctx, templ_7745c5c3_Buffer)
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 20, "</div>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 21, "</div></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = createIssueModal(data).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 22, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = issueDetailModalPartial().Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 23, " ")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = issueScripts(data).Render(ctx, templ_7745c5c3_Buffer)
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			return nil
		})
		templ_7745c5c3_Err = layouts.Base(data.PageData).Render(templ.WithChildren(ctx, templ_7745c5c3_Var2), templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func issueStateTabClass(current, state string) string {
	if current == state || (current == "" && state == "open") {
		return "bg-gray-700 text-white"
	}
	return "bg-gray-800 text-gray-400 hover:text-white hover:bg-gray-700/50"
}

func issueRow(issue IssueItem, repoID string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var14 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var14 == nil {
			templ_7745c5c3_Var14 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, viewIssueClick(issue.Number))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 24, "<div class=\"flex items-center gap-4 p-4 hover:bg-gray-800/30 cursor-pointer transition-colors\" onclick=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var15 templ.ComponentScript = viewIssueClick(issue.Number)
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var15.Call)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 25, "\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var16 = []any{"flex-shrink-0", issueStateIcon(issue.State)}
		templ_7745c5c3_Err = templ.RenderCSSItems(ctx, templ_7745c5c3_Buffer, templ_7745c5c3_Var16...)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 26, "<div class=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var17 string
		templ_7745c5c3_Var17, templ_7745c5c3_Err = templ.JoinStringErrs(templ.CSSClasses(templ_7745c5c3_Var16).String())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 1, Col: 0}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var17))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 27, "\"></div><div class=\"flex-1 min-w-0\"><div class=\"flex items-center gap-2 flex-wrap\"><span class=\"font-medium text-white\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var18 string
		templ_7745c5c3_Var18, templ_7745c5c3_Err = templ.JoinStringErrs(issue.Title)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 124, Col: 54}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var18))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 28, "</span> <span class=\"text-gray-500 text-sm\">#")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var19 string
		templ_7745c5c3_Var19, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", issue.Number))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 125, Col: 74}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var19))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 29, "</span> ")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		for _, label := range issue.Labels {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 30, "<span class=\"text-xs px-2 py-0.5 rounded\" style=\"")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var20 string
			templ_7745c5c3_Var20, templ_7745c5c3_Err = templruntime.SanitizeStyleAttributeValues(labelStyle(label.Color))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 127, Col: 78}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var20))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 31, "\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var21 string
			templ_7745c5c3_Var21, templ_7745c5c3_Err = templ.JoinStringErrs(label.Name)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 128, Col: 18}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var21))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 32, "</span>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 33, "</div><div class=\"flex items-center gap-3 mt-1 text-sm text-gray-400\"><span>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var22 string
		templ_7745c5c3_Var22, templ_7745c5c3_Err = templ.JoinStringErrs(issue.User)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 133, Col: 22}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var22))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 34, "</span> <span>Â·</span> <span>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var23 string
		templ_7745c5c3_Var23, templ_7745c5c3_Err = templ.JoinStringErrs(issue.CreatedAt)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 135, Col: 27}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var23))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 35, "</span></div></div><div class=\"flex items-center gap-4 text-sm text-gray-400\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if issue.Comments > 0 {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 36, "<span><i class=\"fas fa-comment mr-1\"></i>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var24 string
			templ_7745c5c3_Var24, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", issue.Comments))
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 140, Col: 80}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var24))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 37, "</span>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 38, "</div></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func issueStateIcon(state string) string {
	if state == "open" {
		return "text-green-400 fas fa-circle-dot"
	}
	return "text-purple-400 fas fa-circle-check"
}

func labelStyle(color string) string {
	if color == "" {
		return "background-color: #6b7280; color: white;"
	}
	return fmt.Sprintf("background-color: #%s; color: white;", color)
}

func viewIssueClick(number int64) templ.ComponentScript {
	return templ.ComponentScript{
		Name: `__templ_viewIssueClick_8253`,
		Function: `function __templ_viewIssueClick_8253(number){viewIssue(number);
}`,
		Call:       templ.SafeScript(`__templ_viewIssueClick_8253`, number),
		CallInline: templ.SafeScriptInline(`__templ_viewIssueClick_8253`, number),
	}
}

func createIssueModal(data IssueListData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var25 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var25 == nil {
			templ_7745c5c3_Var25 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 39, "<div id=\"create-issue-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-lg mx-4\"><h3 class=\"text-lg font-semibold text-white mb-4\"><i class=\"fas fa-circle-exclamation mr-2 text-yellow-400\"></i>New Issue</h3><form id=\"create-issue-form\" class=\"space-y-4\"><input type=\"hidden\" name=\"csrf_token\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var26 string
		templ_7745c5c3_Var26, templ_7745c5c3_Err = templ.JoinStringErrs(data.CSRFToken)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 171, Col: 65}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var26))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 40, "\"><div><label class=\"block text-sm text-gray-400 mb-1\">Title</label> <input type=\"text\" name=\"title\" required placeholder=\"Issue title\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white focus:border-blue-500\"></div><div><label class=\"block text-sm text-gray-400 mb-1\">Description</label> <textarea name=\"body\" rows=\"6\" placeholder=\"Describe the issue in detail...\" class=\"w-full px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white resize-none\"></textarea></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if len(data.Labels) > 0 {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 41, "<div><label class=\"block text-sm text-gray-400 mb-1\">Labels</label><div class=\"flex flex-wrap gap-2\">")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			for _, label := range data.Labels {
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 42, "<label class=\"inline-flex items-center gap-1 cursor-pointer\"><input type=\"checkbox\" name=\"labels\" value=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var27 string
				templ_7745c5c3_Var27, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d", label.ID))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 188, Col: 81}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var27))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 43, "\" class=\"rounded\"> <span class=\"text-xs px-2 py-0.5 rounded\" style=\"")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var28 string
				templ_7745c5c3_Var28, templ_7745c5c3_Err = templruntime.SanitizeStyleAttributeValues(labelStyle(label.Color))
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 189, Col: 82}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var28))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 44, "\">")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				var templ_7745c5c3_Var29 string
				templ_7745c5c3_Var29, templ_7745c5c3_Err = templ.JoinStringErrs(label.Name)
				if templ_7745c5c3_Err != nil {
					return templ.Error{Err: templ_7745c5c3_Err, FileName: `internal/web/templates/pages/gitea/issues.templ`, Line: 189, Col: 97}
				}
				_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var29))
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
				templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 45, "</span></label>")
				if templ_7745c5c3_Err != nil {
					return templ_7745c5c3_Err
				}
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 46, "</div></div>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 47, "<div class=\"flex justify-end gap-3 pt-2\"><button type=\"button\" onclick=\"closeModal('create-issue-modal')\" class=\"btn-ghost\">Cancel</button> <button type=\"submit\" class=\"btn-primary\">Create Issue</button></div></form></div></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func issueDetailModalPartial() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var30 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var30 == nil {
			templ_7745c5c3_Var30 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 48, "<div id=\"issue-detail-modal\" class=\"fixed inset-0 bg-black/60 z-50 hidden items-center justify-center\"><div class=\"bg-gray-800 rounded-xl border border-gray-700 p-6 w-full max-w-3xl mx-4 max-h-[85vh] flex flex-col\"><div class=\"flex items-center justify-between mb-4\"><h3 class=\"text-lg font-semibold text-white\"><i class=\"fas fa-circle-exclamation mr-2 text-yellow-400\"></i> <span id=\"issue-detail-title\">Issue</span></h3><button onclick=\"closeModal('issue-detail-modal')\" class=\"text-gray-400 hover:text-white\"><i class=\"fas fa-times\"></i></button></div><div id=\"issue-detail-content\" class=\"flex-1 overflow-y-auto\"><div class=\"text-center py-8 text-gray-400\"><i class=\"fas fa-spinner fa-spin text-2xl\"></i></div></div></div></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

func issueScripts(data IssueListData) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var31 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var31 == nil {
			templ_7745c5c3_Var31 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 49, "<script>\n\t\tconst issueRepoID = { templ.JSONString(data.Repo.ID) };\n\t\tconst issueCSRF = { templ.JSONString(data.CSRFToken) };\n\n\t\tfunction openModal(id) {\n\t\t\tdocument.getElementById(id).classList.remove('hidden');\n\t\t\tdocument.getElementById(id).classList.add('flex');\n\t\t}\n\t\tfunction closeModal(id) {\n\t\t\tdocument.getElementById(id).classList.add('hidden');\n\t\t\tdocument.getElementById(id).classList.remove('flex');\n\t\t}\n\t\tfunction openCreateIssueModal() { openModal('create-issue-modal'); }\n\n\t\tfunction escapeHtml(text) {\n\t\t\tconst div = document.createElement('div');\n\t\t\tdiv.textContent = text || '';\n\t\t\treturn div.innerHTML;\n\t\t}\n\n\t\t// Create Issue\n\t\tdocument.getElementById('create-issue-form')?.addEventListener('submit', async (e) => {\n\t\t\te.preventDefault();\n\t\t\tconst form = e.target;\n\t\t\tconst labels = Array.from(form.querySelectorAll('input[name=\"labels\"]:checked')).map(c => parseInt(c.value));\n\t\t\tconst data = {\n\t\t\t\ttitle: form.title.value,\n\t\t\t\tbody: form.body.value,\n\t\t\t\tlabels: labels\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${issueRepoID}/issues`, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'X-CSRF-Token': issueCSRF\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify(data)\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) {\n\t\t\t\t\tconst errText = await resp.text();\n\t\t\t\t\tthrow new Error(errText || 'Failed to create issue');\n\t\t\t\t}\n\t\t\t\tlocation.reload();\n\t\t\t} catch (err) {\n\t\t\t\talert('Error: ' + err.message);\n\t\t\t}\n\t\t});\n\n\t\t// View Issue detail\n\t\tasync function viewIssue(number) {\n\t\t\topenModal('issue-detail-modal');\n\t\t\tdocument.getElementById('issue-detail-content').innerHTML = '<div class=\"text-center py-8\"><i class=\"fas fa-spinner fa-spin text-2xl text-gray-400\"></i></div>';\n\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${issueRepoID}/issues/${number}`);\n\t\t\t\tif (!resp.ok) throw new Error('Failed to load issue');\n\t\t\t\tconst issue = await resp.json();\n\n\t\t\t\t// Load comments\n\t\t\t\tconst commentsResp = await fetch(`/integrations/gitea/repos/${issueRepoID}/issues/${number}/comments`);\n\t\t\t\tconst comments = commentsResp.ok ? await commentsResp.json() : [];\n\n\t\t\t\tdocument.getElementById('issue-detail-title').textContent = `#${issue.number} ${issue.title}`;\n\t\t\t\tdocument.getElementById('issue-detail-content').innerHTML = `\n\t\t\t\t\t<div class=\"space-y-4\">\n\t\t\t\t\t\t<div class=\"flex items-center gap-2 flex-wrap\">\n\t\t\t\t\t\t\t<span class=\"px-2 py-1 rounded text-sm ${issue.state === 'open' ? 'bg-green-500/20 text-green-400' : 'bg-purple-500/20 text-purple-400'}\">\n\t\t\t\t\t\t\t\t${issue.state}\n\t\t\t\t\t\t\t<\\/span>\n\t\t\t\t\t\t\t<span class=\"text-gray-400 text-sm\">Opened by ${escapeHtml(issue.user?.login)}<\\/span>\n\t\t\t\t\t\t\t${(issue.labels || []).map(l => `<span class=\"text-xs px-2 py-0.5 rounded\" style=\"background-color: #${l.color || '6b7280'}; color: white;\">${escapeHtml(l.name)}<\\/span>`).join('')}\n\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t${issue.body ? `<div class=\"bg-gray-900 p-4 rounded-lg text-gray-300 text-sm whitespace-pre-wrap\">${escapeHtml(issue.body)}<\\/div>` : ''}\n\n\t\t\t\t\t\t${comments.length > 0 ? `\n\t\t\t\t\t\t\t<div class=\"border-t border-gray-700 pt-4\">\n\t\t\t\t\t\t\t\t<h4 class=\"text-sm font-medium text-gray-300 mb-3\">Comments (${comments.length})<\\/h4>\n\t\t\t\t\t\t\t\t<div class=\"space-y-3\">\n\t\t\t\t\t\t\t\t\t${comments.map(c => `\n\t\t\t\t\t\t\t\t\t\t<div class=\"bg-gray-900 p-3 rounded-lg\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-2 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-sm font-medium text-white\">${escapeHtml(c.user?.login)}<\\/span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-xs text-gray-500\">${new Date(c.created_at).toLocaleString()}<\\/span>\n\t\t\t\t\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"text-sm text-gray-300 whitespace-pre-wrap\">${escapeHtml(c.body)}<\\/div>\n\t\t\t\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t\t\t\t`).join('')}\n\t\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t\t` : ''}\n\n\t\t\t\t\t\t<div class=\"border-t border-gray-700 pt-4\">\n\t\t\t\t\t\t\t<form id=\"add-comment-form\" class=\"flex gap-2\">\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"body\" placeholder=\"Add a comment...\"\n\t\t\t\t\t\t\t\t\tclass=\"flex-1 px-3 py-2 bg-gray-900 border border-gray-600 rounded-lg text-white text-sm\"\\/>\n\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn-primary text-sm\">Comment<\\/button>\n\t\t\t\t\t\t\t<\\/form>\n\t\t\t\t\t\t<\\/div>\n\n\t\t\t\t\t\t<div class=\"flex items-center gap-4 pt-2\">\n\t\t\t\t\t\t\t<a href=\"${escapeHtml(issue.html_url)}\" target=\"_blank\" class=\"btn-ghost text-sm\">\n\t\t\t\t\t\t\t\t<i class=\"fas fa-external-link-alt mr-2\"><\\/i>View in Gitea\n\t\t\t\t\t\t\t<\\/a>\n\t\t\t\t\t\t\t${issue.state === 'open' ? `\n\t\t\t\t\t\t\t\t<button onclick=\"closeIssue(${issue.number})\" class=\"btn-ghost text-sm text-purple-400\">\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-circle-check mr-2\"><\\/i>Close Issue\n\t\t\t\t\t\t\t\t<\\/button>\n\t\t\t\t\t\t\t` : `\n\t\t\t\t\t\t\t\t<button onclick=\"reopenIssue(${issue.number})\" class=\"btn-ghost text-sm text-green-400\">\n\t\t\t\t\t\t\t\t\t<i class=\"fas fa-circle-dot mr-2\"><\\/i>Reopen Issue\n\t\t\t\t\t\t\t\t<\\/button>\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t<\\/div>\n\t\t\t\t\t<\\/div>\n\t\t\t\t`;\n\n\t\t\t\t// Comment form handler\n\t\t\t\tdocument.getElementById('add-comment-form')?.addEventListener('submit', async (ev) => {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tconst body = ev.target.body.value.trim();\n\t\t\t\t\tif (!body) return;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst r = await fetch(`/integrations/gitea/repos/${issueRepoID}/issues/${issue.number}/comments`, {\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\theaders: { 'Content-Type': 'application/json', 'X-CSRF-Token': issueCSRF },\n\t\t\t\t\t\t\tbody: JSON.stringify({ body })\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (!r.ok) throw new Error('Failed to add comment');\n\t\t\t\t\t\tviewIssue(issue.number);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\talert('Error: ' + err.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tdocument.getElementById('issue-detail-content').innerHTML = `<p class=\"text-red-400\">${escapeHtml(err.message)}</p>`;\n\t\t\t}\n\t\t}\n\n\t\tasync function closeIssue(number) {\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${issueRepoID}/issues/${number}`, {\n\t\t\t\t\tmethod: 'PATCH',\n\t\t\t\t\theaders: { 'Content-Type': 'application/json', 'X-CSRF-Token': issueCSRF },\n\t\t\t\t\tbody: JSON.stringify({ state: 'closed' })\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) throw new Error('Failed to close issue');\n\t\t\t\tlocation.reload();\n\t\t\t} catch (err) {\n\t\t\t\talert('Error: ' + err.message);\n\t\t\t}\n\t\t}\n\n\t\tasync function reopenIssue(number) {\n\t\t\ttry {\n\t\t\t\tconst resp = await fetch(`/integrations/gitea/repos/${issueRepoID}/issues/${number}`, {\n\t\t\t\t\tmethod: 'PATCH',\n\t\t\t\t\theaders: { 'Content-Type': 'application/json', 'X-CSRF-Token': issueCSRF },\n\t\t\t\t\tbody: JSON.stringify({ state: 'open' })\n\t\t\t\t});\n\t\t\t\tif (!resp.ok) throw new Error('Failed to reopen issue');\n\t\t\t\tlocation.reload();\n\t\t\t} catch (err) {\n\t\t\t\talert('Error: ' + err.message);\n\t\t\t}\n\t\t}\n\n\t\t// Escape key closes modals\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\tdocument.querySelectorAll('.fixed.z-50').forEach(m => {\n\t\t\t\t\tm.classList.add('hidden');\n\t\t\t\t\tm.classList.remove('flex');\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
